<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
    <title>Cipta Sejati Banjarmasin</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">
  
  </head>
  <body>
   
   <div class="container">

    <header>Formulir Pendaftaran</header>
    <div class="alert alert-success alert-dismissible fade show d-none my-alert mt-3" role="alert">
      <strong>Berhasil!</strong> Data anda sudah terkirim.
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <form action="" name="submit-to-google-sheet">
      <div class="form">

        <div class="details personal">
          <span class="title">Data Diri</span>
          
          <div class="fields">

            <div class="input-field">
              <label for="">Nama Lengkap</label>
              <input type="text" name="nama" placeholder="Masukkan Nama" required>
            </div>

            <div class="input-field">
              <label for="">Tempat, Tanggal Lahir</label>
              <input type="text" name="tempat, tanggal lahir" placeholder="Masukkan Tempat dan Tanggal Lahir" required>
            </div>

            <div class="input-field">
              <label for="">Pekerjaan</label>
              <input type="text" name="pekerjaan" placeholder="boleh dikosongkan">
            </div>

            <div class="input-field">
              <label for="">Agama</label>
              <input type="text" name="agama" id="-" placeholder="boleh dikosongkan">
            </div>

            <div class="input-field">
              <label for="">No Telp (wa)</label>
              <input type="text" name="no telp" placeholder="Masukkan No Telp (WA)" required>
            </div>

            <div class="input-field">
              <label for="">Alamat</label>
              <input type="text" name="alamat" placeholder="Masukkan Alamat" required>
            </div>
          </div>  
        </div>

        <div class="details family">
          <span class="title">Data Orangtua / wali</span>
            
          <div class="fields">
            <div class="input-field">
              <label for="">Nama</label>
              <input type="text" name="nama wali" placeholder="Masukkan Nama (boleh dikosongkan)">
            </div>

            <div class="input-field">
              <label for="">No Telp</label>
              <input type="text" name="no hp" placeholder="Masukkan No Telp (boleh dikosongkan)">
            </div>

            <div class="input-field">
              <label for="">Keterangan</label>
              <input type="text" name="keterangan" id="" placeholder="Tingakatan/Sabuk">
            </div>

            <div class="input-field thn">
              <label for="">Tahun Kepesertaan</label>
              <input type="text" name="tahun kepesertaan" id="" placeholder="Tahun Mendaftar">
            </div>

            <div class="input-field thn">
            
            </div>
            <div class="input-field thn">
           
            </div>

          </div>
            
          <div>
            <button type="submit" class="btn btn-primary sumbit">Kirim</button>
            <button class="btn btn-primary btn-loading d-none" type="button" disabled>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Mengirim...
            </button>
          </div>
        </div>
    
      </div>
    </form>
   </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script>
      const scriptURL = 'https://script.google.com/macros/s/AKfycbxkXz5BUdfR4iSJbhez3LV07oKgOUYLC-v0_mUwCTzwK6uBzjfBlMSUTddp2j32Y2vm/exec'
      const form = document.forms['submit-to-google-sheet']
      const btnKirim = document.querySelector('.sumbit');
      const btnLoading = document.querySelector('.btn-loading');
      const myAlert = document.querySelector('.my-alert');
    
      form.addEventListener('submit', e => {
        e.preventDefault()
        //ketika submit diklik
        //tampilkan tombol loading,hilangkan tombol kirim
        btnLoading.classList.toggle('d-none');
        btnKirim.classList.toggle('d-none');
        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
          .then(response => {
              btnLoading.classList.toggle('d-none');
              btnKirim.classList.toggle('d-none');
              myAlert.classList.toggle('d-none');
              form.reset();
              console.log('Success!', response);
          })
          .catch(error => console.error('Error!', error.message))
      });
    </script>
  </body>
</html>